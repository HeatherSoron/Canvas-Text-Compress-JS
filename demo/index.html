<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Canvas Compress Example</title>
		<script type='text/javascript' src='../canvascompress.js'></script>
		<style>
            #saveimages img,#loadimages img{margin:1px}
            textarea {width:200px;height:200px}
            table, tr, td, th{border-collapse:collapse;border-left:1px solid black;border-right:1px solid black}
            td{padding:1em}
            table{border:1px solid black}
        </style>
    </head>
<body>

<table>
    <tr>
        <th>Input</th>
        <th>Output</th>
    </tr>
    <tr>
        <td><textarea id='input'></textarea></td>
        <td><textarea id='output'></textarea></td>
    </tr>
    <tr>
        <td><input type='button' value='Save' onclick='Save()'></td>
        <td><input type='button' value='Load' onclick='Load()'></td>
    </tr>
    <tr>
        <td><strong>API</strong><br>CANVAS_COMPRESS.EncodeString(string input)<br>returns string output<br>input must end in a newline. This page appends one to make sure.<br>Compression is only achieved with large input data.</td>
        <td><strong>API</strong><br>CANVAS_COMPRESS.DecodeImage(string input, function callback)<br>returns undefined, calls callback with argument string output</td>
    </tr>
    <tr>
        <td id='saveimages'><strong>Images:</strong><br></td>
        <td id='loadimages'><strong>Images:</strong><br></td>
    </tr>
    <script type="text/javascript">
        <!--
				
	var input = document.getElementById('input'),
	output = document.getElementById('output'),
	loadimages = document.getElementById('loadimages'),
	saveimages = document.getElementById('saveimages');
	
	function Save() {
		var img = document.createElement('img'),
		data = CANVAS_COMPRESS.EncodeString(input.value + '\n');
		img.src = CANVAS_COMPRESS.HEADER + data;
		saveimages.appendChild(img);
    output.value = data;
	}
	
	function Load() {
		var img = document.createElement('img'),
			data = output.value;
		img.src = CANVAS_COMPRESS.HEADER + data;
		loadimages.appendChild(img);
    CANVAS_COMPRESS.DecodeImage(data, function(s) { input.value = s; })
	}
	
        //-->
    </script>
</table>
</body>
</html>